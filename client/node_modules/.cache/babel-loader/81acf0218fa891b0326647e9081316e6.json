{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\user\\\\Desktop\\\\oingo\\\\oingo-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\user\\\\Desktop\\\\oingo\\\\oingo-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\user\\\\Desktop\\\\oingo\\\\oingo-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\user\\\\Desktop\\\\oingo\\\\oingo-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\user\\\\Desktop\\\\oingo\\\\oingo-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\user\\\\Desktop\\\\oingo\\\\oingo-backend\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\oingo\\\\oingo-backend\\\\client\\\\src\\\\mapandlist.js\";\nimport React, { Component } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport { Chip, List, ListItem, ListItemText, Avatar, AppBar, Toolbar, Typography, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Button, TextField } from '@material-ui/core';\nimport ImageIcon from '@material-ui/icons/Image';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { withRouter } from \"react-router-dom\";\nimport SearchIcon from '@material-ui/icons/Search';\n\nvar MapAndList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MapAndList, _Component);\n\n  function MapAndList(props) {\n    var _this;\n\n    _classCallCheck(this, MapAndList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MapAndList).call(this, props));\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n\n        console.log(_this.state);\n      };\n    };\n\n    _this.handleClick = function (nid) {\n      _this.props.history.push({\n        pathname: \"/notes/\" + nid,\n        state: {\n          uid: _this.state.uid,\n          searchKeywords: \"\"\n        }\n      });\n    };\n\n    _this.handleFilterOpen = function () {\n      _this.setState({\n        filterOpen: true\n      });\n    };\n\n    _this.handleFilterClose = function () {\n      _this.setState({\n        filterOpen: false\n      });\n    };\n\n    _this.handleSearchOpen = function () {\n      _this.setState({\n        searchOpen: true\n      });\n    };\n\n    _this.handleSearchClose = function () {\n      _this.setState({\n        searchOpen: false\n      });\n    };\n\n    _this.handleFilterSubmit = function () {\n      var url = 'http://localhost:3000/querys/updatefilter';\n      var formBody = [];\n\n      for (var property in _this.state) {\n        var encodedKey = encodeURIComponent(property);\n        var encodedValue = encodeURIComponent(_this.state[property]);\n        formBody.push(encodedKey + \"=\" + encodedValue);\n      }\n\n      formBody = formBody.join(\"&\");\n      fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: formBody\n      }).then(function (response) {\n        if (response.status >= 400) {\n          throw new Error(\"Bad response from server\");\n        } else if (response.status === 200) {\n          return response.json();\n        }\n      }).then(function (filter) {\n        window.location.reload();\n      });\n    };\n\n    _this.state = {\n      center: {\n        lat: 40.7233,\n        lng: -74.0030\n      },\n      zoom: 14,\n      filterOpen: false,\n      searchOpen: false,\n      filterStartTime: \"7\",\n      filterEndTime: \"8\",\n      uid: _this.props.uid,\n      fradius: 0\n    };\n    return _this;\n  }\n\n  _createClass(MapAndList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var that = this;\n      var url = 'http://localhost:3000/querys/getfilter';\n      var formBody = [];\n\n      for (var property in this.state) {\n        var encodedKey = encodeURIComponent(property);\n        var encodedValue = encodeURIComponent(this.state[property]);\n        formBody.push(encodedKey + \"=\" + encodedValue);\n      }\n\n      formBody = formBody.join(\"&\");\n      fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: formBody\n      }).then(function (response) {\n        if (response.status >= 400) {\n          throw new Error(\"Bad response from server\");\n        } else if (response.status === 200) {\n          return response.json();\n        }\n      }).then(function (filter) {\n        that.setState({\n          fradius: filter[0].fradius\n        });\n        var startDate = new Date(filter[0].fstarttime);\n        that.setState({\n          filterStartTime: startDate.getHours() - 5\n        });\n        var endDate = new Date(filter[0].fendtime);\n        that.setState({\n          filterEndTime: endDate.getHours() - 5\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var MapNotes = this.props.data && this.props.data.map(function (note, index) {\n        return React.createElement(Chip, {\n          lat: note.latitude,\n          lng: note.longitude,\n          label: note.ntext,\n          key: note.nid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        });\n      });\n      var ListNotes = this.props.data && this.props.data.map(function (note, index) {\n        return React.createElement(ListItem, {\n          key: note.nid,\n          button: \"button\",\n          onClick: function onClick() {\n            return _this2.handleClick(note.nid);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(ImageIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        })), React.createElement(ListItemText, {\n          primary: note.ntext,\n          secondary: note.lname,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }));\n      });\n      return React.createElement(\"div\", {\n        className: \"App\",\n        style: {\n          height: '70vh',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(AppBar, {\n        position: \"fixed\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Toolbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h6\",\n        color: \"inherit\",\n        align: \"left\",\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Oingo\"), React.createElement(Button, {\n        color: \"inherit\",\n        onClick: this.handleFilterOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(FilterListIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })), React.createElement(Button, {\n        color: \"inherit\",\n        onClick: this.handleSearchOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(SearchIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })))), React.createElement(GoogleMapReact, {\n        bootstrapURLKeys: {\n          key: \"AIzaSyAUAaYODAySdg0ICAX4u9ganJ7gQGFz834\",\n          language: \"en\"\n        },\n        defaultCenter: this.state.center,\n        defaultZoom: this.state.zoom,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, MapNotes), React.createElement(List, {\n        style: {\n          paddingBottom: '100px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, ListNotes), React.createElement(Dialog, {\n        open: this.state.filterOpen,\n        onClose: this.handleFilterClose,\n        \"aria-labelledby\": \"alert-dialog-title\",\n        \"aria-describedby\": \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"filterAlert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Filter\"), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"filterStartTime\",\n        label: \"Start Time\",\n        value: this.state.filterStartTime,\n        type: \"number\",\n        onChange: this.handleChange('filterStartTime'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        helperText: \"24-hour\",\n        InputProps: {\n          inputProps: {\n            min: 0,\n            max: 24\n          }\n        },\n        style: {\n          marginLeft: 30,\n          marginRight: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"filterEndTime\",\n        label: \"End Time\",\n        value: this.state.filterEndTime,\n        type: \"number\",\n        onChange: this.handleChange('filterEndTime'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        InputProps: {\n          inputProps: {\n            min: 0,\n            max: 24\n          }\n        },\n        style: {\n          marginLeft: 30,\n          marginRight: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"fradius\",\n        label: \"Radius\",\n        value: this.state.fradius,\n        type: \"number\",\n        onChange: this.handleChange('fradius'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        helperText: \"Miles\",\n        nputProps: {\n          inputProps: {\n            min: 0,\n            max: 10\n          }\n        },\n        style: {\n          marginLeft: 30,\n          marginRight: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      })), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleFilterSubmit,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Apply\"), React.createElement(Button, {\n        onClick: this.handleFilterClose,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Close\"))), React.createElement(Dialog, {\n        open: this.state.searchOpen,\n        onClose: this.handleSearchClose,\n        \"aria-labelledby\": \"alert-dialog-title\",\n        \"aria-describedby\": \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"searchAlert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Search\"), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"search\",\n        label: \"Keywords\",\n        value: this.state.searchKeywords,\n        onChange: this.handleChange('searchKeywords'),\n        fullWidth: \"fullWidth\",\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      })), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleSearchApply,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Apply\"), React.createElement(Button, {\n        onClick: this.handleSearchClose,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \"Close\"))));\n    }\n  }]);\n\n  return MapAndList;\n}(Component);\n\nexport default withRouter(MapAndList);","map":{"version":3,"sources":["C:\\Users\\user\\Desktop\\oingo\\oingo-backend\\client\\src\\mapandlist.js"],"names":["React","Component","GoogleMapReact","Chip","List","ListItem","ListItemText","Avatar","AppBar","Toolbar","Typography","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","TextField","ImageIcon","FilterListIcon","withRouter","SearchIcon","MapAndList","props","handleChange","name","event","setState","target","value","console","log","state","handleClick","nid","history","push","pathname","uid","searchKeywords","handleFilterOpen","filterOpen","handleFilterClose","handleSearchOpen","searchOpen","handleSearchClose","handleFilterSubmit","url","formBody","property","encodedKey","encodeURIComponent","encodedValue","join","fetch","method","headers","body","then","response","status","Error","json","filter","window","location","reload","center","lat","lng","zoom","filterStartTime","filterEndTime","fradius","that","startDate","Date","fstarttime","getHours","endDate","fendtime","MapNotes","data","map","note","index","latitude","longitude","ntext","ListNotes","lname","height","width","flex","key","language","paddingBottom","inputProps","min","max","marginLeft","marginRight","handleSearchApply"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport {\r\n  Chip,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Avatar,\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n  Button,\r\n  TextField\r\n} from '@material-ui/core';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\n\r\nclass MapAndList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      center: {\r\n        lat: 40.7233,\r\n        lng: -74.0030\r\n      },\r\n      zoom: 14,\r\n      filterOpen: false,\r\n      searchOpen: false,\r\n      filterStartTime: \"7\",\r\n      filterEndTime: \"8\",\r\n      uid: this.props.uid,\r\n      fradius: 0\r\n    }\r\n  }\r\n\r\n  handleChange = name => event => {\r\n    this.setState({[name]: event.target.value});\r\n    console.log(this.state);\r\n  };\r\n\r\n  handleClick = (nid) => {\r\n    this.props.history.push({\r\n      pathname: \"/notes/\" + nid,\r\n      state: {\r\n        uid: this.state.uid,\r\n        searchKeywords: \"\"\r\n      }\r\n    });\r\n  };\r\n\r\n  handleFilterOpen = () => {\r\n    this.setState({filterOpen: true});\r\n  };\r\n\r\n  handleFilterClose = () => {\r\n    this.setState({filterOpen: false});\r\n  };\r\n\r\n  handleSearchOpen = () => {\r\n    this.setState({searchOpen: true});\r\n  };\r\n\r\n  handleSearchClose = () => {\r\n    this.setState({searchOpen: false});\r\n  };\r\n\r\n  handleFilterSubmit = () => {\r\n    var url = 'http://localhost:3000/querys/updatefilter'\r\n    var formBody = [];\r\n    for (var property in this.state) {\r\n      var encodedKey = encodeURIComponent(property);\r\n      var encodedValue = encodeURIComponent(this.state[property]);\r\n      formBody.push(encodedKey + \"=\" + encodedValue);\r\n    }\r\n    formBody = formBody.join(\"&\");\r\n\r\n    fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded'\r\n      },\r\n      body: formBody\r\n    }).then(function(response) {\r\n      if (response.status >= 400) {\r\n        throw new Error(\"Bad response from server\");\r\n      } else if (response.status === 200) {\r\n        return response.json()\r\n      }\r\n    }).then(function(filter) {\r\n      window.location.reload();\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    var that = this;\r\n\r\n    var url = 'http://localhost:3000/querys/getfilter'\r\n    var formBody = [];\r\n    for (var property in this.state) {\r\n      var encodedKey = encodeURIComponent(property);\r\n      var encodedValue = encodeURIComponent(this.state[property]);\r\n      formBody.push(encodedKey + \"=\" + encodedValue);\r\n    }\r\n    formBody = formBody.join(\"&\");\r\n\r\n    fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded'\r\n      },\r\n      body: formBody\r\n    }).then(function(response) {\r\n      if (response.status >= 400) {\r\n        throw new Error(\"Bad response from server\");\r\n      } else if (response.status === 200) {\r\n        return response.json()\r\n      }\r\n    }).then(function(filter) {\r\n      that.setState({fradius: filter[0].fradius});\r\n      var startDate = new Date(filter[0].fstarttime);\r\n      that.setState({filterStartTime: startDate.getHours()-5})\r\n      var endDate = new Date(filter[0].fendtime);\r\n      that.setState({filterEndTime: endDate.getHours()-5})\r\n    });\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    const MapNotes = this.props.data && this.props.data.map((note, index) => (<Chip lat={note.latitude} lng={note.longitude} label={note.ntext} key={note.nid}/>));\r\n\r\n    const ListNotes = this.props.data && this.props.data.map((note, index) => (<ListItem key={note.nid} button=\"button\" onClick={() => this.handleClick(note.nid)}>\r\n      <Avatar>\r\n        <ImageIcon/>\r\n      </Avatar>\r\n      <ListItemText primary={note.ntext} secondary={note.lname}/>\r\n    </ListItem>));\r\n\r\n    return (<div className=\"App\" style={{\r\n        height: '70vh',\r\n        width: '100%'\r\n      }}>\r\n\r\n      <AppBar position=\"fixed\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" color=\"inherit\" align=\"left\" style={{\r\n              flex: 1\r\n            }}>\r\n            Oingo\r\n          </Typography>\r\n          <Button color=\"inherit\" onClick={this.handleFilterOpen}><FilterListIcon/></Button>\r\n          <Button color=\"inherit\" onClick={this.handleSearchOpen}><SearchIcon/></Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <GoogleMapReact bootstrapURLKeys={{\r\n          key: \"AIzaSyAUAaYODAySdg0ICAX4u9ganJ7gQGFz834\",\r\n          language: \"en\"\r\n        }} defaultCenter={this.state.center} defaultZoom={this.state.zoom}>\r\n        {MapNotes}\r\n      </GoogleMapReact>\r\n      <List style={{\r\n          paddingBottom: '100px'\r\n        }}>\r\n        {ListNotes}\r\n      </List>\r\n\r\n      <Dialog open={this.state.filterOpen} onClose={this.handleFilterClose} aria-labelledby=\"alert-dialog-title\" aria-describedby=\"alert-dialog-description\">\r\n        <DialogTitle id=\"filterAlert\">{\"Filter\"}</DialogTitle>\r\n        <DialogContent>\r\n\r\n          <TextField id=\"filterStartTime\" label=\"Start Time\" value={this.state.filterStartTime} type=\"number\" onChange={this.handleChange('filterStartTime')} margin=\"normal\" variant=\"outlined\" helperText=\"24-hour\" InputProps={{\r\n              inputProps: {\r\n                min: 0,\r\n                max: 24\r\n              }\r\n            }} style={{\r\n              marginLeft: 30,\r\n              marginRight: 30\r\n            }}/>\r\n          <TextField id=\"filterEndTime\" label=\"End Time\" value={this.state.filterEndTime} type=\"number\" onChange={this.handleChange('filterEndTime')} margin=\"normal\" variant=\"outlined\" InputProps={{\r\n              inputProps: {\r\n                min: 0,\r\n                max: 24\r\n              }\r\n            }} style={{\r\n              marginLeft: 30,\r\n              marginRight: 30\r\n            }}/>\r\n          <TextField id=\"fradius\" label=\"Radius\" value={this.state.fradius} type=\"number\" onChange={this.handleChange('fradius')} margin=\"normal\" variant=\"outlined\" helperText=\"Miles\" nputProps={{\r\n              inputProps: {\r\n                min: 0,\r\n                max: 10\r\n              }\r\n            }} style={{\r\n              marginLeft: 30,\r\n              marginRight: 30\r\n            }}/>\r\n\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={this.handleFilterSubmit} color=\"primary\">\r\n            Apply\r\n          </Button>\r\n          <Button onClick={this.handleFilterClose} color=\"primary\">\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog open={this.state.searchOpen} onClose={this.handleSearchClose} aria-labelledby=\"alert-dialog-title\" aria-describedby=\"alert-dialog-description\">\r\n        <DialogTitle id=\"searchAlert\">{\"Search\"}</DialogTitle>\r\n        <DialogContent>\r\n          <TextField id=\"search\" label=\"Keywords\" value={this.state.searchKeywords} onChange={this.handleChange('searchKeywords')} fullWidth=\"fullWidth\" margin=\"normal\"/>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={this.handleSearchApply} color=\"primary\">\r\n            Apply\r\n          </Button>\r\n          <Button onClick={this.handleSearchClose} color=\"primary\">\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n    </div>);\r\n  }\r\n}\r\n\r\nexport default withRouter(MapAndList);\r\n"]},"metadata":{},"sourceType":"module"}